{
  "run_id": "2025-09-24T11:18:58",
  "excel": "/home/sgadal/ATTagger/AI_Tagging_Sys/core/techSpecAgent/TechSpecOutputs/techspec.xlsx",
  "repo": "/home/sgadal/ATTagger/Test/ResidentPortal",
  "items": [
    {
      "sheet": "Reporting Requirement",
      "row_index": 2,
      "page": "Rent Payment",
      "action": "select",
      "kpi": "Resident selects 'Make a rent Payment'",
      "adobe": {
        "var": "eVar27",
        "value": "Select_MakeARentPayment"
      },
      "target_terms": [
        "Make a rent Payment"
      ],
      "top_match": {
        "file": "/home/sgadal/ATTagger/Test/ResidentPortal/src/pages/Help.js",
        "line": 9,
        "confidence": 0.85,
        "evidence": [
          "nearby event handler",
          "clickable JSX element",
          "semantic_sim=0.294"
        ]
      },
      "snippet": "   3: export default function Help(){\n   4:   const nav=useNavigate();\n   5:   return(<div className=\"screen\"><div className=\"page\">\n   6:     <div className=\"toolbar\"><div className=\"pill\">Today ▾</div><div className=\"spacer\"/><a className=\"link ghost\" href=\"#\">Español</a><a className=\"link ghost\" href=\"#\">Reviews</a></div>\n   7:     <h1 className=\"hero red\">What can we help you with today?</h1>\n   8:     <div className=\"grid-2\">\n   9:       <div className=\"card action\" onClick={()=>nav('/payment-Option')}><h3>Make a rent Payment</h3><p>Make a one-time payment or set up auto pay.</p><div className=\"chev\">→</div></div>\n  10:       <div className=\"card\"><h3>Start a new application</h3><p>Apply for a unit in minutes.</p><div className=\"chev\">→</div></div>\n  11:       <div className=\"card\"><h3>Request maintenance</h3><p>Report repairs or issues.</p><div className=\"chev\">→</div></div>\n  12:       <div className=\"card ghost\"><h3>More options</h3><p>Documents, FAQs, and more.</p></div>\n  13:     </div></div></div>);\n  14: }",
      "why_location": "The event handler for the clickable element is located here.",
      "suggested_event_name": "selectMakeARentPayment",
      "suggested_params": {
        "eVar27": "Select_MakeARentPayment",
        "__pv": false,
        "pageName": "Rent Payment"
      },
      "implementation_note": "Ensure the track function is called within the onClick handler.",
      "risks": [
        "Event may not fire if the handler is not correctly set up.",
        "Potential for duplicate events if not managed properly."
      ],
      "code": {
        "imports": "import { track } from '../analytics/track.js';",
        "jsx_attrs": "onClick={() => { track('selectMakeARentPayment', { eVar27: 'Select_MakeARentPayment' }); nav('/payment-Option'); }}"
      },
      "suggested_code_changes": ""
    },
    {
      "sheet": "Reporting Requirement",
      "row_index": 3,
      "page": "Payment Options",
      "action": "select",
      "kpi": "Resident selects Monthly payment option",
      "adobe": {
        "var": "eVar27",
        "value": "Select_PaymentOption_Monthly"
      },
      "target_terms": [
        "Monthly payment option"
      ],
      "top_match": {
        "file": "/home/sgadal/ATTagger/Test/ResidentPortal/src/pages/PaymentOption.js",
        "line": 7,
        "confidence": 0.86,
        "evidence": [
          "nearby event handler",
          "clickable JSX element",
          "semantic_sim=0.515"
        ]
      },
      "snippet": "   1: import React from 'react';\n   2: import { useNavigate } from 'react-router-dom';\n   3: export default function PaymentOption(){\n   4:   const nav=useNavigate();\n   5:   const pick=(type)=>nav('/enter-number',{state:{paymentOption:type}});\n   6:   return(<div className=\"screen\"><div className=\"page\">\n   7:     <div className=\"toolbar\"><button className=\"link\" onClick={()=>nav(-1)}>← Back</button><div className=\"spacer\"/><button className=\"link\" onClick={()=>nav('/help')}>Exit</button></div>\n   8:     <h1 className=\"hero\">Select your rent payment option</h1>\n   9:     <div className=\"grid-2 compact\">\n  10:       <div className=\"tile big\" onClick={()=>pick('Monthly')}><span>Monthly payment</span></div>\n  11:       <div className=\"tile big\" onClick={()=>pick('AutoPay')}><span>Set up AutoPay</span></div>\n  12:     </div></div></div>);\n  13: }",
      "why_location": "The event handler for selecting the payment option is located in the PaymentOption component.",
      "suggested_event_name": "select_payment_option",
      "suggested_params": {
        "eVar27": "Select_PaymentOption_Monthly",
        "pageName": "Payment Options"
      },
      "implementation_note": "Track the selection of the Monthly payment option when the corresponding tile is clicked.",
      "risks": [
        "Incorrect event tracking if the handler is not properly set up",
        "Potential performance issues if tracking is not optimized"
      ],
      "code": {
        "imports": "import { track } from '../analytics/track.js';",
        "jsx_attrs": "onClick={() => { track('select_payment_option', { eVar27: 'Select_PaymentOption_Monthly' }); pick('Monthly'); }}"
      },
      "suggested_code_changes": ""
    },
    {
      "sheet": "Reporting Requirement",
      "row_index": 4,
      "page": "Payment Options",
      "action": "select",
      "kpi": "Resident selects Set up AutoPay option",
      "adobe": {
        "var": "eVar27",
        "value": "Select_PaymentOption_AutoPay"
      },
      "target_terms": [
        "Set up AutoPay"
      ],
      "top_match": {
        "file": "/home/sgadal/ATTagger/Test/ResidentPortal/src/pages/PaymentOption.js",
        "line": 11,
        "confidence": 0.86,
        "evidence": [
          "nearby event handler",
          "clickable JSX element",
          "semantic_sim=0.511"
        ]
      },
      "snippet": "   5:   const pick=(type)=>nav('/enter-number',{state:{paymentOption:type}});\n   6:   return(<div className=\"screen\"><div className=\"page\">\n   7:     <div className=\"toolbar\"><button className=\"link\" onClick={()=>nav(-1)}>← Back</button><div className=\"spacer\"/><button className=\"link\" onClick={()=>nav('/help')}>Exit</button></div>\n   8:     <h1 className=\"hero\">Select your rent payment option</h1>\n   9:     <div className=\"grid-2 compact\">\n  10:       <div className=\"tile big\" onClick={()=>pick('Monthly')}><span>Monthly payment</span></div>\n  11:       <div className=\"tile big\" onClick={()=>pick('AutoPay')}><span>Set up AutoPay</span></div>\n  12:     </div></div></div>);\n  13: }",
      "why_location": "The event handler for selecting the AutoPay option is located in the PaymentOption.js file, specifically on line 11 where the clickable element is defined.",
      "suggested_event_name": "select_payment_option",
      "suggested_params": {
        "eVar27": "Select_PaymentOption_AutoPay",
        "events": "event1",
        "__pv": false,
        "pageName": "Payment Options"
      },
      "implementation_note": "Ensure that the track function is called within the onClick handler for the AutoPay option.",
      "risks": [
        "Event may not fire if the handler is not correctly implemented",
        "Potential for duplicate events if not properly managed"
      ],
      "code": {
        "imports": "import { track } from '../analytics/track.js';",
        "jsx_attrs": "onClick={() => { track('select_payment_option', { eVar27: 'Select_PaymentOption_AutoPay', events: 'event1' }); pick('AutoPay'); }}"
      },
      "suggested_code_changes": ""
    },
    {
      "sheet": "Reporting Requirement",
      "row_index": 5,
      "page": "Monthly Lease",
      "action": "submit",
      "kpi": "Resident enters lease ID for Monthly and taps CONTINUE",
      "adobe": {
        "var": "eVar27",
        "value": "Continue_Monthly_leaseId"
      },
      "target_terms": [
        "CONTINUE"
      ],
      "top_match": {
        "file": "/home/sgadal/ATTagger/Test/ResidentPortal/src/pages/EnterNumber.js",
        "line": 17,
        "confidence": 0.86,
        "evidence": [
          "nearby event handler",
          "clickable JSX element",
          "semantic_sim=0.521"
        ]
      },
      "snippet": "  11:     <h1 className=\"hero\">Enter your lease ID or unit number for {paymentOption.toLowerCase()} payment.</h1>\n  12:     <form className=\"entry\" onSubmit={onSubmit}>\n  13:       <label className=\"field\"><span className=\"label\">{paymentOption}, Lease ID or unit number</span>\n  14:         <input type=\"text\" inputMode=\"numeric\" pattern=\"\\d*\" value={value} onChange={(e)=>setValue(e.target.value.replace(/\\D/g,'').slice(0,maxLen))}/>\n  15:       </label>\n  16:       <Keypad onPress={onKey}/>\n  17:       <button type=\"submit\" className=\"btn primary\" disabled={value.length<Math.min(6,maxLen)}>Continue</button>\n  18:     </form></div></div>);\n  19: }",
      "why_location": "The submit button for the form is where the user interacts to submit the lease ID.",
      "suggested_event_name": "submit_lease_id",
      "suggested_params": {
        "eVar27": "Continue_Monthly_leaseId",
        "events": "event1",
        "pageName": "Monthly Lease"
      },
      "implementation_note": "Track the submission of the lease ID when the CONTINUE button is clicked.",
      "risks": [
        "User may not enter a valid lease ID",
        "Form submission may fail"
      ],
      "code": {
        "imports": "import { track } from '../analytics/track.js';",
        "jsx_attrs": "onClick={() => track('submit_lease_id', { eVar27: 'Continue_Monthly_leaseId', events: 'event1' })}",
        "alt_handler_wrap": "onSubmit={(e) => { e.preventDefault(); track('submit_lease_id', { eVar27: 'Continue_Monthly_leaseId', events: 'event1' }); }}"
      },
      "suggested_code_changes": ""
    },
    {
      "sheet": "Reporting Requirement",
      "row_index": 6,
      "page": "AutoPay",
      "action": "click",
      "kpi": "Resident enters lease ID for AutoPay and taps CONTINUE",
      "adobe": {
        "var": "eVar27",
        "value": "Continue_AutoPay_leaseId"
      },
      "target_terms": [
        "CONTINUE"
      ],
      "top_match": {
        "file": "/home/sgadal/ATTagger/Test/ResidentPortal/src/pages/EnterNumber.js",
        "line": 17,
        "confidence": 0.86,
        "evidence": [
          "nearby event handler",
          "clickable JSX element",
          "semantic_sim=0.520"
        ]
      },
      "snippet": "  11:     <h1 className=\"hero\">Enter your lease ID or unit number for {paymentOption.toLowerCase()} payment.</h1>\n  12:     <form className=\"entry\" onSubmit={onSubmit}>\n  13:       <label className=\"field\"><span className=\"label\">{paymentOption}, Lease ID or unit number</span>\n  14:         <input type=\"text\" inputMode=\"numeric\" pattern=\"\\d*\" value={value} onChange={(e)=>setValue(e.target.value.replace(/\\D/g,'').slice(0,maxLen))}/>\n  15:       </label>\n  16:       <Keypad onPress={onKey}/>\n  17:       <button type=\"submit\" className=\"btn primary\" disabled={value.length<Math.min(6,maxLen)}>Continue</button>\n  18:     </form></div></div>);\n  19: }",
      "why_location": "The button for CONTINUE is located in the EnterNumber.js file, which handles the user input for AutoPay.",
      "suggested_event_name": "AutoPay_Continue_Click",
      "suggested_params": {
        "eVar27": "Continue_AutoPay_leaseId",
        "events": "event1",
        "__pv": false,
        "pageName": "AutoPay"
      },
      "implementation_note": "Track the click event on the CONTINUE button to capture the lease ID entry.",
      "risks": [
        "Button may not be clicked if validation fails",
        "User may not enter a valid lease ID"
      ],
      "code": {
        "imports": "import { track } from '../analytics/track.js';",
        "jsx_attrs": "onClick={() => track('AutoPay_Continue_Click', { eVar27: 'Continue_AutoPay_leaseId' })}",
        "alt_handler_wrap": "onClick={handleClick}",
        "hook": "useEffect(() => { return () => { /* cleanup if necessary */ }; }, []);"
      },
      "suggested_code_changes": ""
    },
    {
      "sheet": "Reporting Requirement",
      "row_index": 7,
      "page": "Reporting Requirement",
      "action": "back",
      "kpi": "Resident taps the BACK button",
      "adobe": {
        "var": "eVar27",
        "value": "Back"
      },
      "target_terms": [
        "Back"
      ],
      "top_match": {
        "file": "/home/sgadal/ATTagger/Test/ResidentPortal/src/pages/EnterNumber.js",
        "line": 10,
        "confidence": 0.85,
        "evidence": [
          "nearby event handler",
          "clickable JSX element",
          "semantic_sim=0.341"
        ]
      },
      "snippet": "   4: export default function EnterNumber(){\n   5:   const nav=useNavigate(); const {state}=useLocation(); const paymentOption=state?.paymentOption||'Monthly';\n   6:   const [value,setValue]=useState(''); const maxLen=paymentOption==='Monthly'?10:12;\n   7:   const onKey=(k)=>{ if(k==='Clear') return setValue(''); if(k==='⌫') return setValue(v=>v.slice(0,-1)); if(/^\\d$/.test(k)) setValue(v=>(v+k).slice(0,maxLen)); };\n   8:   const onSubmit=(e)=>{ e.preventDefault(); if(value.length<Math.min(6,maxLen)) return; alert(`Mock submit for ${paymentOption}: ${value}`); };\n   9:   return(<div className=\"screen\"><div className=\"page\">\n  10:     <div className=\"toolbar\"><button className=\"link\" onClick={()=>nav(-1)}>← Back</button><div className=\"spacer\"/><button className=\"link\" onClick={()=>nav('/help')}>Exit</button></div>\n  11:     <h1 className=\"hero\">Enter your lease ID or unit number for {paymentOption.toLowerCase()} payment.</h1>\n  12:     <form className=\"entry\" onSubmit={onSubmit}>\n  13:       <label className=\"field\"><span className=\"label\">{paymentOption}, Lease ID or unit number</span>\n  14:         <input type=\"text\" inputMode=\"numeric\" pattern=\"\\d*\" value={value} onChange={(e)=>setValue(e.target.value.replace(/\\D/g,'').slice(0,maxLen))}/>\n  15:       </label>\n  16:       <Keypad onPress={onKey}/>",
      "why_location": "The BACK button is a clickable JSX element that triggers navigation.",
      "suggested_event_name": "backButtonClick",
      "suggested_params": {
        "eVar27": "Back",
        "events": "event1",
        "__pv": false,
        "pageName": "Reporting Requirement"
      },
      "implementation_note": "Track the BACK button click event to capture user navigation behavior.",
      "risks": [
        "Event may not fire if navigation fails",
        "User may not expect tracking on BACK button"
      ],
      "code": {
        "imports": "import { track } from '../analytics/track.js';",
        "jsx_attrs": "onClick={() => { track('backButtonClick', { eVar27: 'Back', events: 'event1' }); nav(-1); }}"
      },
      "suggested_code_changes": ""
    }
  ],
  "helper_file": {
    "path": "src/analytics/track.js",
    "contents": "// src/analytics/track.js\nexport function track(eventName, params = {}) {\n  const s = window && window.s;\n  if (!s) {\n    // eslint-disable-next-line no-console\n    console.warn('[track] Adobe AppMeasurement `s` not found. Event:', eventName, params);\n    return;\n  }\n  const isPageView = !!params.__pv;\n  const { __pv, events, ...rest } = params;\n  const prevLinkTrackVars = s.linkTrackVars;\n  const prevLinkTrackEvents = s.linkTrackEvents;\n  try {\n    const varNames = [];\n    for (const [k, v] of Object.entries(rest)) {\n      if (/^(eVar|prop)\\d+$/i.test(k)) { s[k] = v; varNames.push(k); }\n      else if (k === 'pageName') { s.pageName = v; varNames.push('pageName'); }\n    }\n    if (isPageView) {\n      if (events) s.events = events; // e.g., 'event10'\n      s.t();               // page view call\n      s.clearVars();       // prevent bleed to next hit\n      return;\n    }\n    // Link tracking (CTA/click)\n    s.linkTrackVars = varNames.concat('events').join(',');\n    if (events) s.linkTrackEvents = events;\n    s.events = events || '';\n    s.tl(true, 'o', eventName);  // 'o' = custom link, name = eventName\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('track error', e);\n  } finally {\n    s.linkTrackVars = prevLinkTrackVars;\n    s.linkTrackEvents = prevLinkTrackEvents;\n  }\n}\n"
  }
}